<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>RPostgreSQL Integration (works with RedShift)</title>
  <meta name="description" content="Now you can use RPostgreSQL directly in your R scripts (to call AWS RedShift for example).">

  <!--link rel="stylesheet" href="/portableR/css/main.css"-->

  <link rel="stylesheet" type="text/css" href="/portableR/stylesheets/normalize.css" media="screen">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="/portableR/stylesheets/stylesheet.css" media="screen">
  <link rel="stylesheet" type="text/css" href="/portableR/stylesheets/github-light.css" media="screen">

  <link rel="canonical" href="http://nafiux.github.io/portableR/portableR/2015/11/28/RPostgreSQL-integration.html">
  <link rel="alternate" type="application/rss+xml" title="portableR" href="http://nafiux.github.io/portableR/portableR/feed.xml" />
</head>


  <body>

    <section class="page-header">
  <h1 class="project-name"><a href="/portableR/">portableR</a></h1>
  <h2 class="project-tagline">R Statistics ready to run in <strong>AWS Lambda</strong> and x86_64 Linux VMs</h2>
  <a href="https://github.com/nafiux/portableR" class="btn">View on GitHub</a>
  <a href="https://github.com/nafiux/portableR/zipball/master" class="btn">Download .zip</a>
  <a href="https://github.com/nafiux/portableR/tarball/master" class="btn">Download .tar.gz</a>
</section>


    <section class="main-content">

        <!--
      	
      		
      	
      		
      	
        -->

        <div class="post">

  <header class="post-header">
    <h1 class="post-title">RPostgreSQL Integration (works with RedShift)</h1>
    <p class="post-meta">Nov 28, 2015</p>
  </header>

  <article class="post-content">
    <p>Now you can use RPostgreSQL directly in your R scripts (to call AWS RedShift for example).</p>

<h2 id="example">Example</h2>

<h3 id="create-a-chart-using-ggplot2-with-data-query-from-redshift">Create a chart using ggplot2 with data (query) from RedShift</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>library("RPostgreSQL")
require(ggplot2)
drv &lt;- dbDriver("PostgreSQL")
con &lt;- dbConnect(
	drv,
	host="YourDataWareHouse.us-east-1.redshift.amazonaws.com",
	port="5439",
	dbname="tehuixtla",
	user="pueblo",
	password="querido"
)

projectId &lt;- commandArgs(trailingOnly=TRUE)[1]
chartFile &lt;- commandArgs(trailingOnly=TRUE)[2]

query &lt;- paste0("SELECT field1, field2, field3 FROM table1 WHERE field3 IN ( SELECT field3 FROM table2 WHERE projectid = '", projectId, "') ORDER BY field1")

print(query)

data &lt;- dbGetQuery(con, query)

png(filename=chartFile, width=640, height=480)

g &lt;- ggplot(data, aes(field2, field2, color=field3))+geom_line(cex=.2)+theme(legend.position="none")

print(g)
dev.off();
</code></pre>
</div>

  </article>

</div>


        <footer class="site-footer">
  <span class="site-footer-owner"><a href="https://github.com/nafiux/portableR">portableR</a> is maintained by <a href="https://github.com/nafiux">Ignacio Ocamp</a>.</span>

  <span class="site-footer-credits">This page was generated by <a href="http://jekyllrb.com/">Jekyll</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
</footer>

<script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  try {
    var pageTracker = _gat._getTracker("UA-67793246-1");
    pageTracker._trackPageview();
  } catch(err) {}
</script>


    </section>

  </body>

</html>
